<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>pbr.tasks documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="pbr.tasks.html"><div class="inner"><span>pbr.tasks</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="pbr.tasks.html#var-antq-outdated"><div class="inner"><span>antq-outdated</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-antq-upgrade"><div class="inner"><span>antq-upgrade</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-check"><div class="inner"><span>check</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-check-release"><div class="inner"><span>check-release</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-codox"><div class="inner"><span>codox</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-deploy"><div class="inner"><span>deploy</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-deploy-info"><div class="inner"><span>deploy-info</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-eastwood"><div class="inner"><span>eastwood</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-github-url"><div class="inner"><span>github-url</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-kondo"><div class="inner"><span>kondo</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-nvd"><div class="inner"><span>nvd</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-release"><div class="inner"><span>release</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-run-tests"><div class="inner"><span>run-tests</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-uber"><div class="inner"><span>uber</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-uberexec"><div class="inner"><span>uberexec</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">pbr.tasks</h1><div class="doc"><pre class="plaintext">Standard implementations of common tools.build tasks.

The following build task functions are provided, with the
specified required and optional hash map options:

deploy-info    -- opt: :deploy-info-file (defaults to "./resources/deploy-info.edn")
check-release  -- as for the release task --
release        -- req: :lib a symbol identifying your project e.g. 'org.github.pmonks/pbr
                       :version a string containing the version of your project e.g. "1.0.0-SNAPSHOT"
                  opt: :dev-branch the name of the development branch containing the changes to be PRed (defaults to "dev")
                       :prod-branch the name of the production branch where the PR is to be sent (defaults to "main")
                       :pr-desc a format string used for the PR description with two %s values passed in (%1$s = lib, %2$s = version) (defaults to "%1$s release v%2$s. See commit log for details of what's included in this release.")
                       -- all opts from the deploy-info task --

All of the above build tasks return the opts hash map they were passed
(unlike some of the functions in clojure.tools.build.api).</pre></div><div class="public anchor" id="var-antq-outdated"><h3>antq-outdated</h3><div class="usage"><code>(antq-outdated opts)</code></div><div class="doc"><pre class="plaintext">Determine outdated dependencies, via antq. opts includes:

:antq -- opt: a map containing antq-specific configuration options. Sadly these aren't really documented anywhere obvious, but they are passed into this fn: <a href="https://github.com/liquidz/antq/blob/main/src/antq/core.clj#L230">https://github.com/liquidz/antq/blob/main/src/antq/core.clj#L230</a></pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L89">view source</a></div></div><div class="public anchor" id="var-antq-upgrade"><h3>antq-upgrade</h3><div class="usage"><code>(antq-upgrade opts)</code></div><div class="doc"><pre class="plaintext">Unconditionally upgrade any outdated dependencies, via antq. opts includes:

:antq -- opt: a map containing antq-specific configuration options. Sadly these aren't really documented anywhere obvious, but they are passed into this fn: <a href="https://github.com/liquidz/antq/blob/main/src/antq/core.clj#L230">https://github.com/liquidz/antq/blob/main/src/antq/core.clj#L230</a></pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L99">view source</a></div></div><div class="public anchor" id="var-check"><h3>check</h3><div class="usage"><code>(check opts)</code></div><div class="doc"><pre class="plaintext">Check the code by compiling it (and throwing away the result). No options.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L68">view source</a></div></div><div class="public anchor" id="var-check-release"><h3>check-release</h3><div class="usage"><code>(check-release opts)</code></div><div class="doc"><pre class="plaintext">Check that a release can be made from the current directory, using the provided opts. opts includes:

:lib        -- opt: a symbol identifying your project e.g. 'org.github.pmonks/pbr
:version    -- opt: a string containing the version of your project e.g. "1.0.0-SNAPSHOT"
:dev-branch -- opt: the name of the development branch containing the changes to be PRed (defaults to "dev")</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L265">view source</a></div></div><div class="public anchor" id="var-codox"><h3>codox</h3><div class="usage"><code>(codox opts)</code></div><div class="doc"><pre class="plaintext">Generates codox documentation. opts includes:

:lib   -- opt: a symbol identifying your project e.g. 'org.github.pmonks/pbr
:codox -- opt: a codox options map (see <a href="https://github.com/weavejester/codox#project-options)">https://github.com/weavejester/codox#project-options)</a>. Note that PBR will auto-include the :source-uri option for com.github.* projects</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L382">view source</a></div></div><div class="public anchor" id="var-deploy"><h3>deploy</h3><div class="usage"><code>(deploy opts)</code></div><div class="doc"><pre class="plaintext">Builds and deploys the library's artifacts (pom.xml, JAR) to Clojars (or elsewhere), from the 'production' branch. opts includes:

:prod-branch -- opt: the name of the production branch where the deployment is to be initiated from (defaults to "main")
-- opts from the `pom task`, though note that :write-pom and :validate-pom are forced to true --
-- opts from the `build-clj/jar` task --
-- opts from the `build-clj/deploy` task (i.e. deps-deploy) --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L354">view source</a></div></div><div class="public anchor" id="var-deploy-info"><h3>deploy-info</h3><div class="usage"><code>(deploy-info opts)</code></div><div class="doc"><pre class="plaintext">Writes out a deploy-info EDN file, containing at least :hash and :date keys, and possibly also :repo and :tag keys. opts includes:

:deploy-info-file -- req: the name of the file to write to (e.g. "./resources/deploy-info.edn")</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L249">view source</a></div></div><div class="public anchor" id="var-eastwood"><h3>eastwood</h3><div class="usage"><code>(eastwood opts)</code></div><div class="doc"><pre class="plaintext">Run the eastwood linter. opts includes:

:eastwood -- opt: a map containing eastwood-specific configuration options (see <a href="https://github.com/jonase/eastwood#running-eastwood-in-a-repl)">https://github.com/jonase/eastwood#running-eastwood-in-a-repl)</a></pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L231">view source</a></div></div><div class="public anchor" id="var-github-url"><h3>github-url</h3><div class="usage"><code>(github-url lib)</code></div><div class="doc"><pre class="plaintext">Returns the base GitHub URL for the given lib (a namespaced symbol), or nil if it can't be determined. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L57">view source</a></div></div><div class="public anchor" id="var-kondo"><h3>kondo</h3><div class="usage"><code>(kondo opts)</code></div><div class="doc"><pre class="plaintext">Run the clj-kondo linter. No options.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L223">view source</a></div></div><div class="public anchor" id="var-nvd"><h3>nvd</h3><div class="usage"><code>(nvd opts)</code></div><div class="doc"><pre class="plaintext">Run the NVD vulnerability checker

:nvd -- opt: a map containing nvd-clojure-specific configuration options. See <a href="https://github.com/rm-hull/nvd-clojure#configuration-options">https://github.com/rm-hull/nvd-clojure#configuration-options</a></pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L181">view source</a></div></div><div class="public anchor" id="var-release"><h3>release</h3><div class="usage"><code>(release opts)</code></div><div class="doc"><pre class="plaintext">Release a new version of the code via a PR to main. opts includes:

:lib         -- req: a symbol identifying your project e.g. 'org.github.pmonks/pbr
:version     -- req: a string containing the version of your project e.g. "1.0.0-SNAPSHOT"
:dev-branch  -- opt: the name of the development branch containing the changes to be PRed (defaults to "dev")
:prod-branch -- opt: the name of the production branch where the PR is to be sent (defaults to "main")
:pr-desc     -- opt: a format string used for the PR description with two %s values passed in (%1$s = lib, %2$s = version) (defaults to "%1$s release v%2$s. See commit log for details of what's included in this release.")
-- opts from the `deploy-info` task, if you wish to generate deploy-info --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L291">view source</a></div></div><div class="public anchor" id="var-run-tests"><h3>run-tests</h3><div class="usage"><code>(run-tests opts)</code></div><div class="doc"><pre class="plaintext">Runs unit tests (if any). opts includes:

:test-paths -- opt: a sequence of paths containing test code (defaults to ["test"])
:test-deps  -- opt: a dep map of dependencies to add while testing</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L109">view source</a></div></div><div class="public anchor" id="var-uber"><h3>uber</h3><div class="usage"><code>(uber opts)</code></div><div class="doc"><pre class="plaintext">Create an uber jar. opts includes:

:uber-file -- opt: the name of the uberjar file to emit (defaults to the logic in the `build-clj/default-jar-file` fn).
-- opts from the `pom` task --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L132">view source</a></div></div><div class="public anchor" id="var-uberexec"><h3>uberexec</h3><div class="usage"><code>(uberexec opts)</code></div><div class="doc"><pre class="plaintext">Creates an executable uber jar (note: does not bundle a JRE, though one is still required). opts includes:

:uber-file -- opt: the name of the uberjar file to emit (defaults to the logic in the `build-clj/default-jar-file` fn). The executable jar will have the same name, but without the '.jar' extension.
-- opts from the `pom` task --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L142">view source</a></div></div></div></body></html>