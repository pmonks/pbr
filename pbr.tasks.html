<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>pbr.tasks documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="pbr.tasks.html"><div class="inner"><span>pbr.tasks</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="pbr.tasks.html#var-check-release"><div class="inner"><span>check-release</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-deploy"><div class="inner"><span>deploy</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-deploy-info"><div class="inner"><span>deploy-info</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-release"><div class="inner"><span>release</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">pbr.tasks</h1><div class="doc"><pre class="plaintext">Standard implementations of common tools.build tasks.

The following build task functions are provided, with the
specified required and optional hash map options:

deploy-info    -- opt: :deploy-info-file (defaults to "./resources/deploy-info.edn")
check-release  -- as for the release task --
release        -- req: :lib a symbol identifying your project e.g. 'org.github.pmonks/pbr
                       :version a string containing the version of your project e.g. "1.0.0-SNAPSHOT"
                  opt: :dev-branch the name of the development branch containing the changes to be PRed (defaults to "dev")
                       :prod-branch the name of the production branch where the PR is to be sent (defaults to "main")
                       :pr-desc a format string used for the PR description with two %s values passed in (%1$s = lib, %2$s = version) (defaults to "%1$s release v%2$s. See commit log for details of what's included in this release.")
                       -- all opts from the deploy-info task --

All of the above build tasks return the opts hash map they were passed
(unlike some of the functions in clojure.tools.build.api).</pre></div><div class="public anchor" id="var-check-release"><h3>check-release</h3><div class="usage"><code>(check-release opts)</code></div><div class="doc"><pre class="plaintext">Check that a release can be made from the current directory, with the given opts.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L58">view source</a></div></div><div class="public anchor" id="var-deploy"><h3>deploy</h3><div class="usage"><code>(deploy opts)</code></div><div class="doc"><pre class="plaintext">Builds and deploys the library's artifacts (pom.xml, JAR) to Clojars (or elsewhere), from the 'production' branch. opts includes:

:prod-branch -- opt: the name of the production branch where the deployment is to be initiated from (defaults to "main")
-- opts from the pom task, though note that :write-pom and :validate-pom are forced to true --
-- opts from the build-clj/jar task --
-- opts from the build-clj/deploy task (i.e. deps-deploy) --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L144">view source</a></div></div><div class="public anchor" id="var-deploy-info"><h3>deploy-info</h3><div class="usage"><code>(deploy-info opts)</code></div><div class="doc"><pre class="plaintext">Writes out a deploy-info EDN file, containing at least :hash and :date keys, and possibly also a :tag key.  opts includes:

:deploy-info-file -- req: the name of the file to write to (e.g. "./resources/deploy-info.edn")</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L43">view source</a></div></div><div class="public anchor" id="var-release"><h3>release</h3><div class="usage"><code>(release opts)</code></div><div class="doc"><pre class="plaintext">Release a new version of the code via a PR to main. opts includes:

:lib         -- req: a symbol identifying your project e.g. 'org.github.pmonks/pbr
:version     -- req: a string containing the version of your project e.g. "1.0.0-SNAPSHOT"
:dev-branch  -- opt: the name of the development branch containing the changes to be PRed (defaults to "dev")
:prod-branch -- opt: the name of the production branch where the PR is to be sent (defaults to "main")
:pr-desc     -- opt: a format string used for the PR description with two %s values passed in (%1$s = lib, %2$s = version) (defaults to "%1$s release v%2$s. See commit log for details of what's included in this release.")
-- opts from the (deploy-info) task, if you wish to generate deploy-info --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L81">view source</a></div></div></div></body></html>