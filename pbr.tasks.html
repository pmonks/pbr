<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>pbr.tasks documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pbr</span></div></div></li><li class="depth-2 branch"><a href="pbr.convenience.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>convenience</span></div></a></li><li class="depth-2 branch"><a href="pbr.licenses.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>licenses</span></div></a></li><li class="depth-2 branch"><a href="pbr.spdx.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>spdx</span></div></a></li><li class="depth-2 branch current"><a href="pbr.tasks.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tasks</span></div></a></li><li class="depth-2"><a href="pbr.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="pbr.tasks.html#var-check-release"><div class="inner"><span>check-release</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-deploy-info"><div class="inner"><span>deploy-info</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-licenses"><div class="inner"><span>licenses</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-pom"><div class="inner"><span>pom</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-release"><div class="inner"><span>release</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">pbr.tasks</h1><div class="doc"><pre class="plaintext">Peter's Build Resources.

The following build task functions are provided, with the
specified required and optional hash map options:

deploy-info    -- opt: :deploy-info-file (defaults to "./resources/deploy-info.edn")
pom            -- opt: :lib a symbol identifying your project e.g. 'org.github.pmonks/pbr
                       :version a string containing the version of your project e.g. "1.0.0-SNAPSHOT"
                       :pom-file the name of the file to write to (defaults to "./pom.xml")
                       :write-pom a flag determining whether to invoke "clj -Spom" after generating the basic pom (i.e. adding dependencies and repositories from your deps.edn file)
                       :pom a map containing other POM elements (see <a href="https://maven.apache.org/pom.html">https://maven.apache.org/pom.html</a> for details).
licenses       -- opt: :output output format, one of :summary, :detailed (defaults to :summary)
                       :verbose boolean controlling whether to emit verbose output or not (defaults to false)
check-release  -- as for the release task --
release        -- req: :lib a symbol identifying your project e.g. 'org.github.pmonks/pbr
                       :version a string containing the version of your project e.g. "1.0.0-SNAPSHOT"
                  opt: :dev-branch the name of the development branch containing the changes to be PRed (defaults to "dev")
                       :prod-branch the name of the production branch where the PR is to be sent (defaults to "main")
                       :pr-desc a format string used for the PR description with two %s values passed in (%1$s = lib, %2$s = version) (defaults to "%1$s release v%2$s. See commit log for details of what's included in this release.")
                       -- all opts from the deploy-info task --

All of the above build tasks return the opts hash map they were passed
(unlike some of the functions in clojure.tools.build.api).</pre></div><div class="public anchor" id="var-check-release"><h3>check-release</h3><div class="usage"><code>(check-release opts)</code></div><div class="doc"><pre class="plaintext">Check that a release can be made from the current directory, with the given opts.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L149">view source</a></div></div><div class="public anchor" id="var-deploy-info"><h3>deploy-info</h3><div class="usage"><code>(deploy-info opts)</code></div><div class="doc"><pre class="plaintext">Writes out a deploy-info EDN file, containing at least :hash and :date keys, and possibly also a :tag key.  opts includes:

:deploy-info-file -- req: the name of the file to write to (e.g. "./resources/deploy-info.edn")</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L57">view source</a></div></div><div class="public anchor" id="var-licenses"><h3>licenses</h3><div class="usage"><code>(licenses opts)</code></div><div class="doc"><pre class="plaintext">Lists all licenses used transitively by the project.

:output  -- opt: output format, one of :summary, :detailed, :edn (defaults to :summary)
:verbose -- opt: boolean controlling whether to emit verbose output or not (defaults to false)</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L113">view source</a></div></div><div class="public anchor" id="var-pom"><h3>pom</h3><div class="usage"><code>(pom opts)</code></div><div class="doc"><pre class="plaintext">Writes out a pom file. opts includes:

:lib       -- opt: a symbol identifying your project e.g. 'org.github.pmonks/pbr
:version   -- opt: a string containing the version of your project e.g. "1.0.0-SNAPSHOT"
:pom-file  -- opt: the name of the file to write to (defaults to "./pom.xml")
:write-pom -- opt: a flag determining whether to invoke "clj -Spom" after generating the basic pom (i.e. adding dependencies and repositories from your deps.edn file)
:pom       -- opt: a map containing other POM elements (see <a href="https://maven.apache.org/pom.html">https://maven.apache.org/pom.html</a> for details).</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L88">view source</a></div></div><div class="public anchor" id="var-release"><h3>release</h3><div class="usage"><code>(release opts)</code></div><div class="doc"><pre class="plaintext">Release a new version of the code via a PR to main. opts includes:

:lib         -- req: a symbol identifying your project e.g. 'org.github.pmonks/pbr
:version     -- req: a string containing the version of your project e.g. "1.0.0-SNAPSHOT"
:dev-branch  -- opt: the name of the development branch containing the changes to be PRed (defaults to "dev")
:prod-branch -- opt: the name of the production branch where the PR is to be sent (defaults to "main")
:pr-desc     -- opt: a format string used for the PR description with two %s values passed in (%1$s = lib, %2$s = version) (defaults to "%1$s release v%2$s. See commit log for details of what's included in this release.")
-- opts from the (deploy-info) task, if you wish to generate deploy-info --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L173">view source</a></div></div></div></body></html>