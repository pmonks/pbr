<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>pbr.tasks documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="pbr.tasks.html"><div class="inner"><span>pbr.tasks</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="pbr.tasks.html#var-antq-outdated"><div class="inner"><span>antq-outdated</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-antq-upgrade"><div class="inner"><span>antq-upgrade</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-check"><div class="inner"><span>check</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-check-release"><div class="inner"><span>check-release</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-classes-dir"><div class="inner"><span>classes-dir</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-clean"><div class="inner"><span>clean</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-codox"><div class="inner"><span>codox</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-default-basis"><div class="inner"><span>default-basis</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-delete-dir"><div class="inner"><span>delete-dir</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-deploy"><div class="inner"><span>deploy</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-deploy-info"><div class="inner"><span>deploy-info</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-dev-branch"><div class="inner"><span>dev-branch</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-eastwood"><div class="inner"><span>eastwood</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-fq-jar-file-name"><div class="inner"><span>fq-jar-file-name</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-fq-uberjar-file-name"><div class="inner"><span>fq-uberjar-file-name</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-github-url"><div class="inner"><span>github-url</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-install"><div class="inner"><span>install</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-is-directory.3F"><div class="inner"><span>is-directory?</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-jar"><div class="inner"><span>jar</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-jar-file-name"><div class="inner"><span>jar-file-name</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-kondo"><div class="inner"><span>kondo</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-nvd"><div class="inner"><span>nvd</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-pom"><div class="inner"><span>pom</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-pom-file-name"><div class="inner"><span>pom-file-name</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-prod-branch"><div class="inner"><span>prod-branch</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-release"><div class="inner"><span>release</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-run-tests"><div class="inner"><span>run-tests</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-src-dirs"><div class="inner"><span>src-dirs</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-target-dir"><div class="inner"><span>target-dir</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-test-dirs"><div class="inner"><span>test-dirs</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-uber"><div class="inner"><span>uber</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-uberexec"><div class="inner"><span>uberexec</span></div></a></li><li class="depth-1"><a href="pbr.tasks.html#var-uberjar-file-name"><div class="inner"><span>uberjar-file-name</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">pbr.tasks</h1><div class="doc"><pre class="plaintext">Standard implementations of common tools.build tasks.
</pre></div><div class="public anchor" id="var-antq-outdated"><h3>antq-outdated</h3><div class="usage"><code>(antq-outdated opts)</code></div><div class="doc"><pre class="plaintext">Determine outdated dependencies, via antq. opts includes:

:antq -- opt: a map containing antq-specific configuration options. Sadly these aren't really documented anywhere obvious, but they are passed into this fn: <a href="https://github.com/liquidz/antq/blob/main/src/antq/core.clj#L230">https://github.com/liquidz/antq/blob/main/src/antq/core.clj#L230</a></pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L166">view source</a></div></div><div class="public anchor" id="var-antq-upgrade"><h3>antq-upgrade</h3><div class="usage"><code>(antq-upgrade opts)</code></div><div class="doc"><pre class="plaintext">Unconditionally upgrade any outdated dependencies, via antq. opts includes:

:antq -- opt: a map containing antq-specific configuration options. Sadly these aren't really documented anywhere obvious, but they are passed into this fn: <a href="https://github.com/liquidz/antq/blob/main/src/antq/core.clj#L230">https://github.com/liquidz/antq/blob/main/src/antq/core.clj#L230</a></pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L177">view source</a></div></div><div class="public anchor" id="var-check"><h3>check</h3><div class="usage"><code>(check opts)</code></div><div class="doc"><pre class="plaintext">Check the code by compiling it (and throwing away the result). No options.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L144">view source</a></div></div><div class="public anchor" id="var-check-release"><h3>check-release</h3><div class="usage"><code>(check-release opts)</code></div><div class="doc"><pre class="plaintext">Check that a release can be made from the current directory, using the provided opts. opts includes:

:lib        -- opt: a symbol identifying your project e.g. 'org.github.pmonks/pbr
:version    -- opt: a string containing the version of your project e.g. "1.0.0-SNAPSHOT"
:dev-branch -- opt: the name of the development branch containing the changes to be PRed (defaults to "dev")</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L397">view source</a></div></div><div class="public anchor" id="var-classes-dir"><h3>classes-dir</h3><div class="usage"><code>(classes-dir opts)</code></div><div class="doc"><pre class="plaintext">Returns the classes dir (a String) for the given opts. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L80">view source</a></div></div><div class="public anchor" id="var-clean"><h3>clean</h3><div class="usage"><code>(clean opts)</code></div><div class="doc"><pre class="plaintext">Deletes the target directory. opts includes:

:target -- opt: a string specifying the name of the target directory (defaults to "target")</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L134">view source</a></div></div><div class="public anchor" id="var-codox"><h3>codox</h3><div class="usage"><code>(codox opts)</code></div><div class="doc"><pre class="plaintext">Generates codox documentation. opts includes:

:lib   -- opt: a symbol identifying your project e.g. 'org.github.pmonks/pbr
:codox -- opt: a codox options map (see <a href="https://github.com/weavejester/codox#project-options)">https://github.com/weavejester/codox#project-options)</a>. Note that PBR will auto-include the :source-uri option for com.github.* projects</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L514">view source</a></div></div><div class="public anchor" id="var-default-basis"><h3>default-basis</h3><div class="usage"><code>(default-basis)</code></div><div class="doc"><pre class="plaintext">See <a href="https://clojure.github.io/tools.build/clojure.tools.build.api.html#var-create-basis">https://clojure.github.io/tools.build/clojure.tools.build.api.html#var-create-basis</a> for details
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L60">view source</a></div></div><div class="public anchor" id="var-delete-dir"><h3>delete-dir</h3><div class="usage"><code>(delete-dir dir)</code></div><div class="doc"><pre class="plaintext">Deletes the given directory and all of its contents, recursively.  May throw IOException.  Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L52">view source</a></div></div><div class="public anchor" id="var-deploy"><h3>deploy</h3><div class="usage"><code>(deploy opts)</code></div><div class="doc"><pre class="plaintext">Builds and deploys the library's artifacts (pom.xml, JAR) to Clojars (or elsewhere), from the 'production' branch. opts includes:

:prod-branch -- opt: the name of the production branch where the deployment is to be initiated from (defaults to "main")
-- opts from the `pom task`, though note that :write-pom and :validate-pom are forced to true --
-- opts from the `jar` task --
-- opts from `deps-deploy/deploy` (see <a href="https://github.com/slipset/deps-deploy/blob/master/src/deps_deploy/deps_deploy.clj#L196-L214)">https://github.com/slipset/deps-deploy/blob/master/src/deps_deploy/deps_deploy.clj#L196-L214)</a> --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L488">view source</a></div></div><div class="public anchor" id="var-deploy-info"><h3>deploy-info</h3><div class="usage"><code>(deploy-info opts)</code></div><div class="doc"><pre class="plaintext">Writes out a deploy-info EDN file, containing at least :hash and :date keys, and possibly also :repo and :tag keys. opts includes:

:deploy-info-file -- req: the name of the file to write to (e.g. "./resources/deploy-info.edn")</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L380">view source</a></div></div><div class="public anchor" id="var-dev-branch"><h3>dev-branch</h3><div class="usage"><code>(dev-branch opts)</code></div><div class="doc"><pre class="plaintext">Returns the name of the dev branch (a String) for the given opts. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L110">view source</a></div></div><div class="public anchor" id="var-eastwood"><h3>eastwood</h3><div class="usage"><code>(eastwood opts)</code></div><div class="doc"><pre class="plaintext">Run the eastwood linter. opts includes:

:eastwood -- opt: a map containing eastwood-specific configuration options (see <a href="https://github.com/jonase/eastwood#running-eastwood-in-a-repl)">https://github.com/jonase/eastwood#running-eastwood-in-a-repl)</a></pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L363">view source</a></div></div><div class="public anchor" id="var-fq-jar-file-name"><h3>fq-jar-file-name</h3><div class="usage"><code>(fq-jar-file-name opts)</code></div><div class="doc"><pre class="plaintext">Returns the fully-qualified jar file name (with path) for the given opts. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L95">view source</a></div></div><div class="public anchor" id="var-fq-uberjar-file-name"><h3>fq-uberjar-file-name</h3><div class="usage"><code>(fq-uberjar-file-name opts)</code></div><div class="doc"><pre class="plaintext">Returns the fuly-qualified uberjar file name (with path) for the given opts. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L105">view source</a></div></div><div class="public anchor" id="var-github-url"><h3>github-url</h3><div class="usage"><code>(github-url lib)</code></div><div class="doc"><pre class="plaintext">Returns the base GitHub URL for the given lib (a namespaced symbol), or nil if it can't be determined. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L120">view source</a></div></div><div class="public anchor" id="var-install"><h3>install</h3><div class="usage"><code>(install opts)</code></div><div class="doc"><pre class="plaintext">Installs a library JAR in the local Maven cache (typically ~/.m2/repository). opts includes:

-- opts from the `jar` task --
-- opts from the `tools.build/install` task --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L298">view source</a></div></div><div class="public anchor" id="var-is-directory.3F"><h3>is-directory?</h3><div class="usage"><code>(is-directory? f)</code></div><div class="doc"><pre class="plaintext">Returns true if f (a File or String) is a directory, or a symlink to a directory, or false otherwise.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L46">view source</a></div></div><div class="public anchor" id="var-jar"><h3>jar</h3><div class="usage"><code>(jar opts)</code></div><div class="doc"><pre class="plaintext">Generates a library JAR for the project. opts includes:

:main   -- opt: the name of the JAR's main class (defaults to nil)
:target -- opt: a string specifying the name of the target directory (defaults to "target")
-- opts from the `pom` task --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L232">view source</a></div></div><div class="public anchor" id="var-jar-file-name"><h3>jar-file-name</h3><div class="usage"><code>(jar-file-name opts)</code></div><div class="doc"><pre class="plaintext">Returns the jar file name (without path) for the given opts. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L90">view source</a></div></div><div class="public anchor" id="var-kondo"><h3>kondo</h3><div class="usage"><code>(kondo opts)</code></div><div class="doc"><pre class="plaintext">Run the clj-kondo linter. No options.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L356">view source</a></div></div><div class="public anchor" id="var-nvd"><h3>nvd</h3><div class="usage"><code>(nvd opts)</code></div><div class="doc"><pre class="plaintext">Run the NVD vulnerability checker

:nvd -- opt: a map containing nvd-clojure-specific configuration options. See <a href="https://github.com/rm-hull/nvd-clojure#configuration-options">https://github.com/rm-hull/nvd-clojure#configuration-options</a></pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L312">view source</a></div></div><div class="public anchor" id="var-pom"><h3>pom</h3><div class="usage"><code>(pom opts)</code></div><div class="doc"><pre class="plaintext">Generates a comprehensive pom.xml file. See <a href="https://github.com/pmonks/tools-pom/">https://github.com/pmonks/tools-pom/</a> for opts
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L212">view source</a></div></div><div class="public anchor" id="var-pom-file-name"><h3>pom-file-name</h3><div class="usage"><code>(pom-file-name opts)</code></div><div class="doc"><pre class="plaintext">Returns the pom file name (without path) for the given opts. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L85">view source</a></div></div><div class="public anchor" id="var-prod-branch"><h3>prod-branch</h3><div class="usage"><code>(prod-branch opts)</code></div><div class="doc"><pre class="plaintext">Returns the name of the prod branch (a String) for the given opts. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L115">view source</a></div></div><div class="public anchor" id="var-release"><h3>release</h3><div class="usage"><code>(release opts)</code></div><div class="doc"><pre class="plaintext">Release a new version of the code via a PR to main. opts includes:

:lib         -- req: a symbol identifying your project e.g. 'org.github.pmonks/pbr
:version     -- req: a string containing the version of your project e.g. "1.0.0-SNAPSHOT"
:dev-branch  -- opt: the name of the development branch containing the changes to be PRed (defaults to "dev")
:prod-branch -- opt: the name of the production branch where the PR is to be sent (defaults to "main")
:pr-desc     -- opt: a format string used for the PR description with two %s values passed in (%1$s = lib, %2$s = version) (defaults to "%1$s release v%2$s. See commit log for details of what's included in this release.")
-- opts from the `deploy-info` task, if you wish to generate deploy-info --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L425">view source</a></div></div><div class="public anchor" id="var-run-tests"><h3>run-tests</h3><div class="usage"><code>(run-tests opts)</code></div><div class="doc"><pre class="plaintext">Runs unit tests (if any). opts includes:

:test-paths -- opt: a sequence of paths containing test code (defaults to ["test"])
:test-deps  -- opt: a dep map of dependencies to add while testing</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L188">view source</a></div></div><div class="public anchor" id="var-src-dirs"><h3>src-dirs</h3><div class="usage"><code>(src-dirs)</code></div><div class="doc"><pre class="plaintext">Returns the source directories (a sequence of Strings) for the default basis. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L65">view source</a></div></div><div class="public anchor" id="var-target-dir"><h3>target-dir</h3><div class="usage"><code>(target-dir opts)</code></div><div class="doc"><pre class="plaintext">Returns the target dir (a String) for the given opts. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L75">view source</a></div></div><div class="public anchor" id="var-test-dirs"><h3>test-dirs</h3><div class="usage"><code>(test-dirs opts)</code></div><div class="doc"><pre class="plaintext">Returns the test directories (a sequence of Strings) for the given opts.  Note: these directories may not exist. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L70">view source</a></div></div><div class="public anchor" id="var-uber"><h3>uber</h3><div class="usage"><code>(uber opts)</code></div><div class="doc"><pre class="plaintext">Create an uber jar. opts includes:

-- opts from the `pom` task --
-- opts from the `tools.build/uber` task --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L247">view source</a></div></div><div class="public anchor" id="var-uberexec"><h3>uberexec</h3><div class="usage"><code>(uberexec opts)</code></div><div class="doc"><pre class="plaintext">Creates an executable uber jar (note: does not bundle a JRE, and one is still required). opts includes:

-- opts from the `pom` task --
-- opts from the `uber` task --</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L267">view source</a></div></div><div class="public anchor" id="var-uberjar-file-name"><h3>uberjar-file-name</h3><div class="usage"><code>(uberjar-file-name opts)</code></div><div class="doc"><pre class="plaintext">Returns the uberjar file name (without path) for the given opts. Note: this is a utility fn, not a task fn.
</pre></div><div class="src-link"><a href="https://github.com/pmonks/pbr/blob/main/src/pbr/tasks.clj#L100">view source</a></div></div></div></body></html>